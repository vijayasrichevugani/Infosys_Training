gcloud compute instances create gcelab --zone us-central1-c

gcloud compute disks create mydisk --size=200GB \
--zone us-central1-c

gcloud compute instances attach-disk gcelab --disk mydisk --zone us-central1-c

1) SSH into the virtual machine:

gcloud compute ssh gcelab --zone us-central1-c

2) Now find the disk device by listing the disk devices in /dev/disk/by-id/.

ls -l /dev/disk/by-id/






Formatting and mounting the persistent disk

1) Make a mount point:

sudo mkdir /mnt/mydisk

2) Next, format the disk with a single ext4 filesystem using the mkfs tool. This command deletes all data from the specified disk:

sudo mkfs.ext4 -F -E lazy_itable_init=0,lazy_journal_init=0,discard /dev/disk/by-id/scsi-0Google_PersistentDisk_persistent-disk-1

3)Now use the mount tool to mount the disk to the instance with the discard option enabled:

sudo mount -o discard,defaults /dev/disk/by-id/scsi-0Google_PersistentDisk_persistent-disk-1 /mnt/mydisk


Automatically mount the disk on restart
By default the disk will not be remounted if your virtual machine restarts. To make sure the disk is remounted on restart, you need to add an entry into /etc/fstab.

1) Open /etc/fstab in nano to edit.

sudo nano /etc/fstab

2) Add the following below the line that starts with "UUID=..."

/dev/disk/by-id/scsi-0Google_PersistentDisk_persistent-disk-1 /mnt/mydisk ext4 defaults 1 1